.PHONY: bootstrap app-env app-env-vars destroy-app-env destroy-bootstrap

# ğŸ› ï¸ Makefile: Vereinfacht das AusfÃ¼hren der Terraform-Stacks.
# - `make bootstrap`    â†’ Provisioniert Basisinfrastruktur (Cluster, Registry)
# - `make app-env`      â†’ FÃ¼hrt App-Umgebung Ã¼ber TF_VAR-Wrapper aus
# - `make app-env-vars` â†’ Alternativ: Ãœbergabe via .auto.tfvars.json-Datei
# - `make destroy-*`    â†’ Entfernt jeweilige Stacks

bootstrap:
	cd terraform/bootstrap && terraform init && terraform apply -auto-approve

# Option A: via TF_VAR_â€¦
app-env:
	./scripts/app-env-apply.sh

# Option B: via .auto.tfvars.json
app-env-vars:
	./scripts/mk-app-env-vars.sh
	cd terraform/app-env && terraform init && terraform apply -auto-approve

destroy-app-env:
	cd terraform/app-env && terraform destroy -auto-approve

destroy-bootstrap:
	cd terraform/bootstrap && terraform destroy -auto-approve

	